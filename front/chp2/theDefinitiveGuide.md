[TOC]

# CSS权威指南

## CSS和文档
### 元素
元素是文档结构的基础。
#### 替换元素和非替换元素
##### 替换元素
替换元素在指用来替换元素内容的部分并非由文档内容直接表示。如`<img>`标签

##### 非替换元素
大多数HTML和XHTML元素都是非替换内容。

#### 元素显示角色
##### 块级元素
块级元素生成一个元素框，（默认地）它会填充其父元素的内容区，旁边不能有其他元素。
##### 行内元素
行内元素在一个文本行内生成元素框，而不会打断这行文本。

#### 结合CSS和XHTML
##### link标记
```html
<link rel="stylesheet" type="text/css" href="sheet1.css" media="all" />
```
###### 属性
- rel 关系 stylesheet
- type text/css
- href URL
- media 有很多可取值
    - all 用于所有表现媒体
    - aural 用户语言合成器、屏幕阅读器和文档的其他声音表现。
    - braille 用Braille设备表现文档时使用
    - embossed 用Braille打印设备时使用
    - handheld 用于手持设备，如个人数字助理或支持Web的蜂窝电话
    - print 为视力正常的用户打印文档时使用，另外还会在显示文档的“打印预览”时使用
    - projection 用于投影媒体，如发表演讲时显示幻灯片的数字投影仪
    - screen 在屏幕媒体（如桌面计算机监视器）中表现文档时使用。在这种系统上运行的所有Web浏览器都是平米媒体用户代理
    - tty 在固定间距环境（如电传打字机）中显示文档时使用
    - tv 在电视上显示文档时使用
    
###### 候选样式表
将rel属性的值设置为alternate stylesheet，就可以定义候选样式表。

##### style元素
```html
<style type="text/css" ></style>
```

##### @import指令
```html
<style type="text/css" >
@import url(style.css);
</style>
```

##### 具体的样式规则
###### 向后可访问性
注释标记的开始标记(<!--)紧接着出现在style开始标记之后，注释结束标记(-->)出现在style结束标记之前
```html
<style type="text/css" ><!--
@import url(style.css);
--></style>
```
这样，不能识别的会被注释，能识别的会正常读取。

##### CSS注释
CSS支持注释，用/* 和 */包围
##### 内联样式


---

## 选择器

### 基本规则
#### 规则结构
每个规则都有两个基本部分：选择器（selector）和声明块（declaration block）。
声明块由一个或多个声明（declaration）组成，每个声明则是一个属性-值对（property-value）。
每个样式表由一系列规则组成。

#### 元素选择器
最常见的选择器往往是HTML元素，文档的元素就是最基本的选择器。

#### 声明和关键字
声明块包含一个或多个声明。声明总有如下格式：一个属性后面跟一个冒号，再后面是一个值，然后是一个分号。

### 分组
#### 选择器分组
如果希望两个选择器都应用某个规则，将选择器放在规则左边，并用逗号分隔。

##### 通配选择器
星号（*）为通配选择器。

#### 声明分组
既然可以将选择器分组到一个规则中，当然也可以对声明分组，

#### 结合选择器和声明的分组
可以对选择器分组，还可以对声明分组。

### 类选择器和ID选择器
#### 类选择器
```css
.warning { font-weight: bold;}
```
#### 多类选择器
```css
.warning.urgent{background: silver;}
```

#### ID选择器
```css
#first-para { font-weight:bold;}
```

### 属性选择器
对于类选择器和ID选择器，实际上只是选择属性值。在其他标记语言中，不能使用这些类和ID选择器。
为了解决这个问题，引入属性选择器，可根据元素的属性及属性值来选择元素。共4种类型的属性选择器。

#### 简单属性选择
选择有class属性的所有h1元素
````css
h1[class]{color: silver;}
````
#### 根据具体属性值选择
指向Web服务器上某个特定文档的超链接变成粗体
```css
a[href="http://mysite.com"]{font-weight: bold;}
```

#### 根据部分属性值选择
选择class属性中包含warning的元素
```css
p[class~="warning"]{ font-weight: bold;}
```

子串匹配属性选择器

类型 | 描述
--- | ---
[foo^="bar] | 选择foo属性值以"bar"开头的所有元素
[foo$="bar] | 选择foo属性值以"bar"结尾的所有元素
[foo*="bar] | 选择foo属性值中包含子串"bar"的所有元素

#### 特定属性选择类型
```css
* [lang |="en"] { color: white;}
```
这个规则会选择lang属性等于en或者以en-开头的所有元素。

### 使用文档结构
#### 理解父子关系
#### 后代选择器
```css
h1 em {color:gray;}
```

#### 选择子元素
在某些情况下，可能并不想选择一个任意的后代元素，而是希望缩小范围，只选择另一个元素的子元素。
```css
h1 > p{color: red;}
```

#### 选择相邻兄弟元素
```css
h1 + p {margin-top: 0;}
```
### 伪类和伪元素
伪类选择器和伪元素选择器才真正有些意思。

#### 伪类选择器
有两种基本的锚元素：已访问的和未访问的。这些类型称为伪类，使用这些伪类的选择器则称为伪类选择器。

##### 链接伪类

伪类名 | 描述
--- | ---
:link | 指示作为超链接（即有一个href属性）并指向一个未访问地址的所有锚。之一，有些浏览器可能会不正确地将:link解释为指向任何超链接，包括已访问和未访问的超链接
:visited | 指示作为已访问地址超链接的所有锚

##### 动态伪类

伪类名 | 描述
--- | ---
:focus | 指示当前拥有输入焦点的元素，也就是说，可以接受键盘输入或者能以某种方式激活的元素
:hover | 指示鼠标指针停留在哪个元素上
:active | 指示被用户输入激活的元素

##### 动态样式的实际问题

##### 选择第一个子元素
使用静态伪类:first-child来选择元素的第一个子元素。
```css
p:first-child{ font-weight: bold;}
```

##### 根据语言选择
根据元素的语言来选择，可以使用:lang()伪类。
```css
*:lang(fr) {font-style: italic}
```

##### 结合伪类
```css
a:link:hover {color: red;}
```

####伪元素选择器
##### 设置首字母样式
```css
p:first-letter {color: red;}
```
##### 设置第一行的样式
```css
p:first-line {color: purple;}
```
##### :first-letter 和:first-line的限制

伪元素所允许的属性

:first-letter | :first-line
--- | ---
所有font属性 | 所有font属性
color | color
所有background属性 | 所有background属性
所有margin属性 | word-spacing
所有padding属性 | letter-spacing
所有border属性 | text-decoration
text-decoration | vertical-align
vertical-align(如果float设置为none) | text-transform 
text-transform | line-height
line-height | clear
float | text-shadow
letter-spacing | --
word-spacing | --
clear  | --
text-shadow | --

##### 设置之前和之后元素的样式
允许插入生成的内容，然后使用伪元素:before和:after直接设置样式。

## 结构和层叠
继承是从一个元素向其后代元素传递属性值所采用的机制。确定应当向一个元素应用哪些值时，
用户代理不仅要考虑继承，还要考虑声明的特殊性，另外需要考虑声明本身的来源。这个过程就称为层叠。

### 特殊性
选择器的特殊性由选择器本身的组件确定。特殊性值表述为4个部分，如：0,0,0,0。
- 对于选择器中给定的各个ID属性值，加0,1,0,0。
- 对于选择器中给定的各个类属性值、属性选择或伪类，加0,0,1,0。
- 对于选择器中给定的各个元素和伪元素，加0,0,0,1。
- 结合符和通配选择器对特殊性没有任何贡献。
```css
p em {color:purple;} /* specificity = 0,0,0,2 */
p.bright em.dark {color:maroon;} /* specificity = 0,0,2,2 */
```
上述两条规则的第五条的特殊性高于第二条的特殊性。

#### 声明和特殊性
任何情况下，用户代理都会确定哪些规则与一个元素匹配，计算出所有相关的声明及其特殊性，确定哪些规则胜出，然后将胜出的规则应用到元素，从而得到应用样式后的结果。

#### 通配选择器特殊性
通配选择器对一个选择器的特殊性没有贡献。其特殊性为0,0,0,0，这与根本没有特殊性由区别。

#### ID和属性选择器的特殊性
ID选择器和指定id属性的属性选择器在特殊性上有所不同。
```css
html > body table tr[id="totals"] td ul > li {color: maroon;} /* 0,0,1,7 */
li#answer {color:navy;} /* 0,1,0,1 */
```

#### 内联样式特殊性
内联声明的特殊性都是1,0,0,0。

#### 重要性
有时某个声明可能非常重要，超过了所有其他声明，允许在这些声明的结束分号之前插入!important来标志。

### 继承
基于继承机制，样式不仅应用到指定的元素，还会应用到它的后代元素。

有些属性不能继承，这往往归因于一个简单的常识。大多数框模型属性（包括外边距、内边距、背景和边框）都不能继承。

继承值没有特殊性。

### 层叠
如果特殊性相等的两个规则同时应用到同一元素时，其规则如下：
1. 找出所有相关的规则，这些规则都包含与一个给定元素匹配的选择器。
2. 按显式权重对应用到该元素的所有声明排序。标志!important的规则的权重要高于没有!important标志的规则。\
按来源对应用到给定元素的所有声明排序。共有三种来源：创作人员、读者和用户代理。\
正常情况下，创作人员的样式要胜过读者的样式。有!important标志的读者样式要强于所有其他样式，这包括有!important标志的创作人员样式。
创作人员样式和读者样式都比用户代理的默认样式要强。
3. 按特殊性对应用到给定元素的所有声明排序。有较高特殊性的元素权重要大于有较低特殊性的元素。
4. 按出现顺序对应用到给定元素的所有声明排序。一个声明在样式表或文档中越后出现，它的权重就越大。\
如果样式表中有导入的样式表，一般认为出现在导入样式表中的声明在前，主样式表中的所有声明在后。

## 值和单位
### 数字
### 百分数
### 颜色
### 长度单位
### URL
### CSS2单位


## 字体
### 字体系列
### 字体加粗
### 字体大小
### 风格和变形
### 拉伸和调整字体
### font属性
### 字体匹配

## 文本属性
### 缩进和水平对齐
### 垂直对齐
### 字间隔和字母间隔
### 文本转换
### 文本修饰
### 文本阴影

## 基本视觉格式化

### 基本框
### 块级元素
### 行内元素
### 改变元素显示

## 内边距、边框和外边距

### 基本元素框
### 外边距
### 边框
### 内边距

## 颜色和背景
### 颜色
### 前景色
### 背景

## 浮动和定位
### 浮动
### 定位

## 表布局
### 表格式化
### 表单元格边框
### 表大小

## 列表与生成内容
### 列表
### 生成内容

## 用户界面样式
### 系统字体和颜色
### 光标
### 轮廓

## 非屏幕媒体
